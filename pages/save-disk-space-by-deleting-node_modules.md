---
layout: 'page'
slug: 'save-disk-space-by-deleting-node_modules'
title: |
  Save disk space by deleting node_modules
tags: 'page'
excerpt: |
  I also posted this on my blog: https://willcodefor.beer/posts/save-disk-space-by-deleting-node-modules/
---

<h2 class="text-3xl font-semibold mb-4"><a class="rounded-sm focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 dark:focus:ring-pink-400 focus:ring-pink-700" href="/pages/save-disk-space-by-deleting-node_modules">Save disk space by deleting node_modules</a></h2>

<div class="space-y-3">
<div class="element-block ml-0"><div class="flex-1">I also posted this on my blog: <a class="text-indigo-600 dark:text-indigo-400 rounded-sm focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 dark:focus:ring-pink-400 focus:ring-pink-700" href="https://willcodefor.beer/posts/save-disk-space-by-deleting-node-modules/" target="_blank" rel="noopener noreferrer">https://willcodefor.beer/posts/save-disk-space-by-deleting-node-modules/</a></div></div>

<div class="element-block ml-0"><div class="flex-1">After developing on a computer for a while you'll probably end up with a bunch of projects. If those projects are <a class="text-teal-700 dark:text-teal-400 rounded-sm group focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 dark:focus:ring-pink-400 focus:ring-pink-700" href="/pages/javascript"><span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">[[</span>JavaScript<span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">]]</span></a> there's a good change that they contain a <code>node_modules</code> directory. From time to time it's a good idea to remove all of these folders, since they can get quite big, and re-download the dependencies in the projects you're actively using.</div></div>

<div class="element-block ml-0"><div class="flex-1">I have aliased the following command to <code>node-prune</code> and have been <a class="text-indigo-600 dark:text-indigo-400 rounded-sm focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 dark:focus:ring-pink-400 focus:ring-pink-700" href="https://github.com/believer/dotfiles/commit/a440d8abcdb47cf6fe5d9af69519f960f7c96ce0" target="_blank" rel="noopener noreferrer">using it since</a> <a class="text-teal-700 dark:text-teal-400 rounded-sm group focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 dark:focus:ring-pink-400 focus:ring-pink-700" href="/journals/2019-12-11"><span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">[[</span>2019-12-11<span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">]]</span></a> without any issues. When I ran the command on <a class="text-teal-700 dark:text-teal-400 rounded-sm group focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 dark:focus:ring-pink-400 focus:ring-pink-700" href="/journals/2021-11-08"><span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">[[</span>2021-11-08<span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">]]</span></a> I got back ~40 GB of disk space. Use it <strong class="text-rose-600 dark:text-rose-400">at your own risk</strong>.</div></div>

<div class="element-block ml-4"><div class="flex-1">

```bash
alias node-prune='find . -name "node_modules" -type d -prune -exec rm -rf '{}' +'
```

</div></div>



<div class="element-block ml-0"><div class="flex-1">If you just want to find and display the size of the folders you can use the following command</div></div>

<div class="element-block ml-4"><div class="flex-1">

```bash
find . -name "node_modules" -type d -prune -print | xargs du -chs
```

</div></div>



<div class="element-block ml-0"><div class="flex-1">There's also <code>npkill</code> which looks up and displays <code>node_modules</code>, displays their size and allows you to delete the folders. Run it by using <code>npx npkill</code></div></div>

<hr class="border-gray-700 !my-5" />

<div class="element-block ml-0"><div class="flex-1"><a class="text-teal-700 dark:text-teal-400 rounded-sm group focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 dark:focus:ring-pink-400 focus:ring-pink-700" href="/pages/erik-rasmussen"><span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">[[</span>Erik Rasmussen<span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">]]</span></a>. <a class="text-teal-700 dark:text-teal-400 rounded-sm group focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 dark:focus:ring-pink-400 focus:ring-pink-700" href="/journals/2021-11-09"><span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">[[</span>2021-11-09<span class="text-gray-300 dark:text-gray-500 group-hover:text-teal-900">]]</span></a>. <a class="text-indigo-600 dark:text-indigo-400 rounded-sm focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 dark:focus:ring-pink-400 focus:ring-pink-700" href="https://twitter.com/erikras/status/1458074052929728515" target="_blank" rel="noopener noreferrer">Tweet</a></div></div>


</div>


<section class="mt-8 space-y-2">
<header class="text-gray-500 dark:text-gray-400">Linked references</header>
<a class="block bg-gray-100 dark:bg-gray-800 p-4 rounded text-teal-700 dark:text-teal-400 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-900 focus:ring-teal-700 dark:focus:ring-teal-400 hover:ring-2 hover:ring-offset-2 dark:hover:ring-offset-gray-900 dark:hover:ring-teal-400 hover:ring-teal-700" href="/journals/2021-11-10">2021-11-10</a>
  </section>
